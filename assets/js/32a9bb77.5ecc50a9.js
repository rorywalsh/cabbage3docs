"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4248],{4782:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>o});var d=s(4848),a=s(8453);const i={title:"Cabbage JS API",description:"Cabbage API"},c="Cabbage JavaScript API Reference",t={id:"CabbageJS_API",title:"Cabbage JS API",description:"Cabbage API",source:"@site/docs/CabbageJS_API.md",sourceDirName:".",slug:"/CabbageJS_API",permalink:"/cabbage3docs/docs/CabbageJS_API",draft:!1,unlisted:!1,editUrl:"https://github.com/rorywalsh/cabbage3docs/tree/main/docs/CabbageJS_API.md",tags:[],version:"current",frontMatter:{title:"Cabbage JS API",description:"Cabbage API"},sidebar:"docSidebar",previous:{title:"cabbageSetValue",permalink:"/cabbage3docs/docs/cabbage_opcodes/cabbageSetValue"}},l={},o=[{value:"Architecture Overview",id:"architecture-overview",level:2},{value:"UI \u2192 Backend (Outgoing Communication)",id:"ui--backend-outgoing-communication",level:3},{value:"Backend \u2192 UI (Incoming Communication)",id:"backend--ui-incoming-communication",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"Core Functions",id:"core-functions",level:3},{value:"<code>Cabbage.sendControlData(data, vscode)</code>",id:"cabbagesendcontroldatadata-vscode",level:4},{value:"<code>Cabbage.sendChannelData(channel, data, vscode)</code>",id:"cabbagesendchanneldatachannel-data-vscode",level:4},{value:"<code>Cabbage.sendMidiMessageFromUI(statusByte, dataByte1, dataByte2, vscode)</code>",id:"cabbagesendmidimessagefromuistatusbyte-databyte1-databyte2-vscode",level:4},{value:"<code>Cabbage.MidiMessageFromHost(statusByte, dataByte1, dataByte2)</code>",id:"cabbagemidimessagefromhoststatusbyte-databyte1-databyte2",level:4},{value:"<code>Cabbage.isReadyToLoad(vscode, additionalData)</code>",id:"cabbageisreadytoloadvscode-additionaldata",level:4},{value:"Utility Functions",id:"utility-functions",level:3},{value:"<code>Cabbage.triggerFileOpenDialog(vscode, channel, options)</code>",id:"cabbagetriggerfileopendialogvscode-channel-options",level:4},{value:"<code>Cabbage.openUrl(vscode, url, file)</code>",id:"cabbageopenurlvscode-url-file",level:4},{value:"<code>Cabbage.consumeKeypresses(consume)</code> <em>(Windows plugin mode only)</em>",id:"cabbageconsumekeypressesconsume-windows-plugin-mode-only",level:4},{value:"<code>Cabbage.requestResize(width, height, vscode)</code>",id:"cabbagerequestresizewidth-height-vscode",level:4},{value:"Private Functions",id:"private-functions",level:3},{value:"<code>Cabbage.sendCustomCommand(command, vscode, additionalData)</code>",id:"cabbagesendcustomcommandcommand-vscode-additionaldata",level:4},{value:"<code>Cabbage.sendWidgetUpdate(widget, vscode)</code>",id:"cabbagesendwidgetupdatewidget-vscode",level:4},{value:"Incoming Messages (Backend -&gt; UI)",id:"incoming-messages-backend---ui",level:2},{value:"Message Types",id:"message-types",level:3},{value:"<code>parameterChange</code>",id:"parameterchange",level:4},{value:"<code>updateWidget</code>",id:"updatewidget",level:4},{value:"<code>csoundOutputUpdate</code>",id:"csoundoutputupdate",level:4},{value:"<code>resizeResponse</code>",id:"resizeresponse",level:4},{value:"Gesture Types",id:"gesture-types",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Avoiding Feedback Loops",id:"avoiding-feedback-loops",level:3},{value:"Thread Safety",id:"thread-safety",level:3},{value:"Value Ranges",id:"value-ranges",level:3},{value:"Environment Detection",id:"environment-detection",level:3}];function r(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"cabbage-javascript-api-reference",children:"Cabbage JavaScript API Reference"})}),"\n",(0,d.jsx)(n.p,{children:"The Cabbage JavaScript API provides the communication layer between webview UIs and the Cabbage backend. This API enables bidirectional communication for plugin development."}),"\n",(0,d.jsxs)(n.p,{children:["\ud83d\udcc3 ",(0,d.jsx)(n.strong,{children:"Note:"})," A ",(0,d.jsx)(n.code,{children:"<Cabbage>{...}</Cabbage>"})," JSON structure is still required to define parameters for use in a host application. Objects declared in this structure are accessible through the API via a custom event handler (see below). These objects are sent at load time and can be updated at runtime using the ",(0,d.jsx)(n.a,{href:"/docs/cabbage_opcodes/cabbageSet",children:(0,d.jsx)(n.code,{children:"cabbageSet"})})," and ",(0,d.jsx)(n.a,{href:"/docs/cabbage_opcodes/cabbageSetValue",children:(0,d.jsx)(n.code,{children:"cabbageSetValue"})})," opcodes."]}),"\n",(0,d.jsx)(n.h2,{id:"architecture-overview",children:"Architecture Overview"}),"\n",(0,d.jsx)(n.h3,{id:"ui--backend-outgoing-communication",children:"UI \u2192 Backend (Outgoing Communication)"}),"\n",(0,d.jsxs)(n.p,{children:["Use ",(0,d.jsx)(n.code,{children:"Cabbage.sendControlData()"})," to send widget value changes to the backend. The backend automatically determines routing based on channel automatable status."]}),"\n",(0,d.jsx)(n.h3,{id:"backend--ui-incoming-communication",children:"Backend \u2192 UI (Incoming Communication)"}),"\n",(0,d.jsxs)(n.p,{children:["The backend sends messages via ",(0,d.jsx)(n.code,{children:"window.hostMessageCallback()"}),". Implement this global function to handle incoming messages."]}),"\n",(0,d.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,d.jsx)(n.h3,{id:"core-functions",children:"Core Functions"}),"\n",(0,d.jsx)(n.h4,{id:"cabbagesendcontroldatadata-vscode",children:(0,d.jsx)(n.code,{children:"Cabbage.sendControlData(data, vscode)"})}),"\n",(0,d.jsx)(n.p,{children:"Send widget value changes to the Cabbage backend. This is the primary API for user interactions."}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"data"})," (Object): Control data object","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"channel"})," (string): The channel name"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"value"})," (number|string): Value in natural range (e.g., 20-20000 Hz for frequency)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"gesture"})," (string, optional): Gesture type - ",(0,d.jsx)(n.code,{children:'"begin"'}),", ",(0,d.jsx)(n.code,{children:'"value"'}),", ",(0,d.jsx)(n.code,{children:'"end"'}),", ",(0,d.jsx)(n.code,{children:'"complete"'})," (default: ",(0,d.jsx)(n.code,{children:'"complete"'}),")"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"vscode"})," (Object|null): VS Code API instance (null for plugin mode)"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Behavior:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Automatically routes based on channel automatable status"}),"\n",(0,d.jsx)(n.li,{children:"Thread-safe: Asynchronous, doesn't block audio thread"}),"\n",(0,d.jsx)(n.li,{children:"Values sent in natural ranges, backend handles normalization"}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-javascript",children:'// Basic usage\nCabbage.sendControlData({ channel: "frequency", value: 1000 }, this.vscode);\n\n// With gesture for DAW automation\nCabbage.sendControlData({ channel: "volume", value: 0.8, gesture: "begin" }, this.vscode);\nCabbage.sendControlData({ channel: "volume", value: 0.9, gesture: "value" }, this.vscode);\nCabbage.sendControlData({ channel: "volume", value: 0.9, gesture: "end" }, this.vscode);\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h4,{id:"cabbagesendchanneldatachannel-data-vscode",children:(0,d.jsx)(n.code,{children:"Cabbage.sendChannelData(channel, data, vscode)"})}),"\n",(0,d.jsx)(n.p,{children:"Send channel data directly to Csound without DAW automation - bypasses all widget routing and validation."}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"channel"})," (string): Csound channel name"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"data"})," (number|string): Data to send"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"vscode"})," (Object|null): VS Code API instance"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Notes:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Use ",(0,d.jsx)(n.code,{children:"sendControlData()"})," instead for most cases as it will determine the best route for this data"]}),"\n",(0,d.jsx)(n.li,{children:"Bypasses DAW automation system"}),"\n",(0,d.jsx)(n.li,{children:"Automatically determines string vs numeric data"}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h4,{id:"cabbagesendmidimessagefromuistatusbyte-databyte1-databyte2-vscode",children:(0,d.jsx)(n.code,{children:"Cabbage.sendMidiMessageFromUI(statusByte, dataByte1, dataByte2, vscode)"})}),"\n",(0,d.jsx)(n.p,{children:"Send MIDI messages from the UI to the backend."}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"statusByte"})," (number): MIDI status byte"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"dataByte1"})," (number): First data byte"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"dataByte2"})," (number): Second data byte"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"vscode"})," (Object|null): VS Code API instance"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Example:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-javascript",children:"Cabbage.sendMidiMessageFromUI(144, 60, 100, this.vscode); // Note on\n"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h4,{id:"cabbagemidimessagefromhoststatusbyte-databyte1-databyte2",children:(0,d.jsx)(n.code,{children:"Cabbage.MidiMessageFromHost(statusByte, dataByte1, dataByte2)"})}),"\n",(0,d.jsx)(n.p,{children:"Handle incoming MIDI messages from the backend (callback function)."}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"statusByte"})," (number): MIDI status byte"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"dataByte1"})," (number): First data byte"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"dataByte2"})," (number): Second data byte"]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h4,{id:"cabbageisreadytoloadvscode-additionaldata",children:(0,d.jsx)(n.code,{children:"Cabbage.isReadyToLoad(vscode, additionalData)"})}),"\n",(0,d.jsx)(n.p,{children:"Signal that the UI is ready to load and initialize."}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"vscode"})," (Object|null): VS Code API instance"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"additionalData"})," (Object, optional): Additional initialization data"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"utility-functions",children:"Utility Functions"}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h4,{id:"cabbagetriggerfileopendialogvscode-channel-options",children:(0,d.jsx)(n.code,{children:"Cabbage.triggerFileOpenDialog(vscode, channel, options)"})}),"\n",(0,d.jsx)(n.p,{children:"Trigger a file open dialog for file selection widgets."}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"vscode"})," (Object|null): VS Code API instance"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"channel"})," (string): Associated channel name"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"options"})," (Object, optional): Dialog options","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"directory"})," (string): Starting directory"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"filters"})," (string): File filters"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"openAtLastKnownLocation"})," (boolean): Use last known location"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Example:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-javascript",children:'Cabbage.triggerFileOpenDialog(this.vscode, "audioFile", {\n    filters: "*.wav;*.aiff",\n    openAtLastKnownLocation: true\n});\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h4,{id:"cabbageopenurlvscode-url-file",children:(0,d.jsx)(n.code,{children:"Cabbage.openUrl(vscode, url, file)"})}),"\n",(0,d.jsx)(n.p,{children:"Open a URL or file in the system default application."}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"vscode"})," (Object|null): VS Code API instance"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"url"})," (string): URL to open"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"file"})," (string): File path to open"]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsxs)(n.h4,{id:"cabbageconsumekeypressesconsume-windows-plugin-mode-only",children:[(0,d.jsx)(n.code,{children:"Cabbage.consumeKeypresses(consume)"})," ",(0,d.jsx)(n.em,{children:"(Windows plugin mode only)"})]}),"\n",(0,d.jsx)(n.p,{children:"Control whether keyboard events are captured by the webview or forwarded to the host DAW."}),"\n",(0,d.jsxs)(n.p,{children:["By default (",(0,d.jsx)(n.code,{children:"false"}),"), all key events are passed through to the DAW so keyboard shortcuts keep working while the plugin UI has focus. This is handled automatically by Cabbage's internal key listener."]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"consume"})," (boolean): ",(0,d.jsx)(n.code,{children:"true"})," to capture keys in the webview, ",(0,d.jsx)(n.code,{children:"false"})," to pass them through to the DAW (default)"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Notes:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Native ",(0,d.jsx)(n.code,{children:"<input>"})," and ",(0,d.jsx)(n.code,{children:"<textarea>"})," elements are handled automatically \u2014 no need to call this"]}),"\n",(0,d.jsxs)(n.li,{children:["Only required for custom text-entry widgets built from non-native elements (e.g. a ",(0,d.jsx)(n.code,{children:"div"}),"-based code editor)"]}),"\n",(0,d.jsxs)(n.li,{children:["Always restore to ",(0,d.jsx)(n.code,{children:"false"})," when the custom widget loses focus"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Example:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-javascript",children:"myCustomEditor.addEventListener('focus', () => Cabbage.consumeKeypresses(true));\nmyCustomEditor.addEventListener('blur',  () => Cabbage.consumeKeypresses(false));\n"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h4,{id:"cabbagerequestresizewidth-height-vscode",children:(0,d.jsx)(n.code,{children:"Cabbage.requestResize(width, height, vscode)"})}),"\n",(0,d.jsx)(n.p,{children:"Request a resize of the plugin GUI window (plugin mode only)."}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"width"})," (number): Requested width in pixels"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"height"})," (number): Requested height in pixels"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"vscode"})," (Object|null): VS Code API instance"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Notes:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Only works in plugin mode (CLAP/VST3/AUv2)"}),"\n",(0,d.jsx)(n.li,{children:"Host may accept or reject the request"}),"\n",(0,d.jsxs)(n.li,{children:["Backend sends a ",(0,d.jsx)(n.code,{children:"resizeResponse"})," message indicating acceptance and final dimensions"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"private-functions",children:"Private Functions"}),"\n",(0,d.jsxs)(n.p,{children:["\u26a0\ufe0f ",(0,d.jsx)(n.strong,{children:"Important:"})," These functions are used internally and are not for general use."]}),"\n",(0,d.jsx)(n.h4,{id:"cabbagesendcustomcommandcommand-vscode-additionaldata",children:(0,d.jsx)(n.code,{children:"Cabbage.sendCustomCommand(command, vscode, additionalData)"})}),"\n",(0,d.jsx)(n.p,{children:"Send custom commands to the backend for specialized operations."}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"command"})," (string): Command name"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"vscode"})," (Object|null): VS Code API instance"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"additionalData"})," (Object, optional): Additional data to send"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Example:"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-javascript",children:"Cabbage.sendCustomCommand('cabbageIsReadyToLoad', null);\n"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h4,{id:"cabbagesendwidgetupdatewidget-vscode",children:(0,d.jsx)(n.code,{children:"Cabbage.sendWidgetUpdate(widget, vscode)"})}),"\n",(0,d.jsx)(n.p,{children:"Update widget state in the backend (used by property panel)."}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"widget"})," (Object): Widget configuration object"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"vscode"})," (Object|null): VS Code API instance"]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"incoming-messages-backend---ui",children:"Incoming Messages (Backend -> UI)"}),"\n",(0,d.jsxs)(n.p,{children:["Implement ",(0,d.jsx)(n.code,{children:"window.hostMessageCallback"})," to handle messages from the backend:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-javascript",children:'window.hostMessageCallback = function(data) {\n    switch(data.command) {\n        case "parameterChange":\n            // DAW automation or backend parameter update\n            // Update display only - NEVER send back to backend\n            // updateWidgetDisplay(data.channel, data.value);\n            break;\n\n        case "updateWidget":\n            // Widget property update from Csound (cabbageSetValue, cabbageSet)\n            // updateWidget(data.widgetJson);\n            break;\n\n        case "csoundOutputUpdate":\n            // Csound console output for debugging\n            console.log("Csound output:", data.text);\n            break;\n\n        case "resizeResponse":\n            // Response to GUI resize request\n            if (data.accepted) {\n            //     updateGuiDimensions(data.width, data.height);\n            } else {\n            //     handleResizeRejected(data.width, data.height);\n            }\n            break;\n    }\n};\n'})}),"\n",(0,d.jsx)(n.h3,{id:"message-types",children:"Message Types"}),"\n",(0,d.jsx)(n.h4,{id:"parameterchange",children:(0,d.jsx)(n.code,{children:"parameterChange"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Purpose"}),": Parameter updates from DAW automation or backend"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Fields"}),": ",(0,d.jsx)(n.code,{children:"channel"}),", ",(0,d.jsx)(n.code,{children:"value"}),", ",(0,d.jsx)(n.code,{children:"gesture"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Action"}),": Update visual display only (avoid feedback loops)"]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h4,{id:"updatewidget",children:(0,d.jsx)(n.code,{children:"updateWidget"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Purpose"}),": Widget state updates from Csound opcodes"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Fields"}),": ",(0,d.jsx)(n.code,{children:"id"}),", ",(0,d.jsx)(n.code,{children:"widgetJson"}),", ",(0,d.jsx)(n.code,{children:"value"})," (optional)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Action"}),": Update widget properties and visual state"]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h4,{id:"csoundoutputupdate",children:(0,d.jsx)(n.code,{children:"csoundOutputUpdate"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Purpose"}),": Csound console output for debugging"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Fields"}),": ",(0,d.jsx)(n.code,{children:"text"})]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Action"}),": Display or log Csound output"]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h4,{id:"resizeresponse",children:(0,d.jsx)(n.code,{children:"resizeResponse"})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Purpose"}),": Response to GUI resize requests"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Fields"}),": ",(0,d.jsx)(n.code,{children:"accepted"})," (boolean), ",(0,d.jsx)(n.code,{children:"width"})," (number), ",(0,d.jsx)(n.code,{children:"height"})," (number)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Action"}),": Handle resize acceptance/rejection and update UI dimensions"]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"gesture-types",children:"Gesture Types"}),"\n",(0,d.jsx)(n.p,{children:"Use appropriate gestures for proper DAW automation recording:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:(0,d.jsx)(n.code,{children:'"begin"'})}),": Start of user interaction (e.g., mouse down on slider)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:(0,d.jsx)(n.code,{children:'"value"'})}),": Continuous updates during interaction (e.g., mouse drag)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:(0,d.jsx)(n.code,{children:'"end"'})}),": End of continuous interaction (e.g., mouse up)"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:(0,d.jsx)(n.code,{children:'"complete"'})}),": Discrete actions (e.g., button clicks, default)"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,d.jsx)(n.h3,{id:"avoiding-feedback-loops",children:"Avoiding Feedback Loops"}),"\n",(0,d.jsxs)(n.p,{children:["When receiving ",(0,d.jsx)(n.code,{children:"parameterChange"})," messages, ",(0,d.jsx)(n.strong,{children:"only update the visual display"}),". Never send ",(0,d.jsx)(n.code,{children:"sendControlData()"})," in response, as this creates feedback loops that interfere with DAW automation."]}),"\n",(0,d.jsx)(n.h3,{id:"thread-safety",children:"Thread Safety"}),"\n",(0,d.jsx)(n.p,{children:"All outgoing functions are asynchronous and thread-safe. They queue messages without blocking the audio thread."}),"\n",(0,d.jsx)(n.h3,{id:"value-ranges",children:"Value Ranges"}),"\n",(0,d.jsx)(n.p,{children:"Send values in their full/natural ranges (e.g., 20-20000 Hz for frequency). The backend handles all DAW normalization automatically."}),"\n",(0,d.jsx)(n.h3,{id:"environment-detection",children:"Environment Detection"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"VS Code mode"}),": Pass ",(0,d.jsx)(n.code,{children:"this.vscode"})," as the vscode parameter"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Plugin mode"}),": Pass ",(0,d.jsx)(n.code,{children:"null"})," for vscode parameter"]}),"\n",(0,d.jsx)(n.li,{children:"Functions automatically detect the environment and use appropriate communication channels"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(r,{...e})}):r(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>t});var d=s(6540);const a={},i=d.createContext(a);function c(e){const n=d.useContext(i);return d.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),d.createElement(i.Provider,{value:n},e.children)}}}]);